# **Roadmap de instalaÃ§Ã£o do Docker Engine no Ubuntu Server 24.04 via CL/**
 seguindo **exatamente** a documentaÃ§Ã£o oficial mais recente baseado em 08/09/2025.

---


### 1. **Atualizar**

```bash
sudo apt update
```

ğŸ” *Motivo*: garante que o `apt` conheÃ§a as versÃµes mais novas dos pacotes antes da instalaÃ§Ã£o.

---

### 2. **Instalar dependÃªncias necessÃ¡rias**

```bash
sudo apt-get install ca-certificates curl
```

ğŸ” *Motivo*:

* `ca-certificates` â†’ permite validar certificados HTTPS.
* `curl` â†’ usado para baixar arquivos, como a chave GPG.

---

### 3. **Criar diretÃ³rio para armazenar a chave GPG**

```bash
sudo install -m 0755 -d /etc/apt/keyrings
```

ğŸ” *Motivo*:
Esse diretÃ³rio `/etc/apt/keyrings` Ã© onde o Ubuntu armazena as chaves de repositÃ³rios externos de forma organizada e segura.

---

### 4. **Baixar a chave GPG oficial do Docker**

```bash
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
```

ğŸ” *Motivo*:
Essa chave permite que o `apt` verifique a autenticidade dos pacotes Docker.

> Hoje o `apt` jÃ¡ aceita `.asc`, por isso nÃ£o precisa mais do `gpg --dearmor`.

---

### 5. **Dar permissÃ£o de leitura Ã  chave**

```bash
sudo chmod a+r /etc/apt/keyrings/docker.asc
```

ğŸ” *Motivo*:
Garante que qualquer usuÃ¡rio ou processo que use o `apt` consiga ler a chave para validar os pacotes.

---

### 6. **Adicionar o repositÃ³rio oficial do Docker**

Show, Jonathas ğŸ‘Œ vamos detalhar esses dois pontos **com base na documentaÃ§Ã£o oficial do Docker**:

---


```bash
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

### âœ… explicando por partes do comando.

* `dpkg --print-architecture` â†’ retorna a arquitetura da mÃ¡quina (`amd64`, `arm64`, etc.).
  ğŸ” Isso garante que vocÃª baixe os pacotes certos para o seu hardware.

* `. /etc/os-release && echo "$VERSION_CODENAME"` â†’ lÃª as variÃ¡veis do arquivo `/etc/os-release`.
  Dentro desse arquivo existe a variÃ¡vel `VERSION_CODENAME`.

  * No **Ubuntu 24.04 LTS**, o codename Ã© **noble**.
  * No Ubuntu 22.04 LTS â†’ **jammy**.
  * No Ubuntu 20.04 LTS â†’ **focal**.

Ou seja, no seu caso (24.04), esse comando se expande automaticamente para algo assim:

```bash
deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu noble stable
```

ğŸ“Œ *Motivo*: evita ter que escrever manualmente o codename. Assim o script Ã© portÃ¡til entre diferentes versÃµes do Ubuntu.

---

Quer que eu monte pra vocÃª um **exemplo real expandido** mostrando como ficaria o `sources.list.d/docker.list` no **Ubuntu 24.04 (noble)**, jÃ¡ substituindo as variÃ¡veis?


---

### 7. **Atualizar os pacotes novamente**

```bash
sudo apt-get update
```

ğŸ” *Motivo*:
Agora o `apt` vai buscar pacotes tambÃ©m no repositÃ³rio oficial do Docker.

---

### 8. **Instalar o Docker Engine e ferramentas**

```bash
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

ğŸ” *Motivo*:

* `docker-ce` â†’ engine principal do Docker.
* `docker-ce-cli` â†’ interface de linha de comando (`docker`).
* `containerd.io` â†’ runtime que executa os containers.
* `docker-buildx-plugin` â†’ build avanÃ§ado de imagens.
* `docker-compose-plugin` â†’ permite rodar `docker compose`.

---


### **LocalizaÃ§Ã£o dos Arquivos de ConfiguraÃ§Ã£o do Docker-CE**
```bash
/etc/docker/       <-- DiretÃ³rio de configuraÃ§Ã£o do Docker
/var/lib/docker/   <-- DiretÃ³rio raiz de dados do Docker
```

### **Interface e EndereÃ§amento IPv4 padrÃ£o do Docker-CE**
#verificando a interface e endereÃ§o IPv4 do Docker-CE
```bash
sudo ifconfig docker0
  docker0: 172.17.0.1/16 (255.255.0.0)
```

### 9. **Testar a instalaÃ§Ã£o**

```bash
sudo docker run hello-world
```

ğŸ” *Motivo*:
Baixa e executa um container de teste para verificar se o Docker estÃ¡ funcionando corretamente.

---

### 10.  **dicionar usuÃ¡rio ao grupo `docker**

Depois de instalar o Docker, por padrÃ£o **sÃ³ o root pode rodar `docker`**.
Se vocÃª tentar rodar `docker ps` como usuÃ¡rio normal, vai dar erro de permissÃ£o.

A doc oficial recomenda criar o grupo `docker` (se nÃ£o existir) e adicionar seu usuÃ¡rio:

```bash
sudo groupadd docker
# incluir o usuario corrente (logado)
sudo usermod -aG docker $USER

# incluir o usuario especifico
sudo usermod -aG docker <NOME USUARIO>

newgrp docker
```

### âœ… Quebrando por partes:

* `sudo groupadd docker` â†’ cria o grupo chamado `docker` (normalmente ele jÃ¡ Ã© criado junto com a instalaÃ§Ã£o, mas esse comando garante).
* `sudo usermod -aG docker $USER` â†’ adiciona seu usuÃ¡rio atual ao grupo `docker`.
* `newgrp docker` â†’ aplica a mudanÃ§a imediatamente **sem precisar reiniciar**.

Verificar o grupo do seu usuÃ¡rio atual
```bash
groups
```

Mostra todos os grupos aos quais o usuÃ¡rio pertence.

Exemplo de saÃ­da:
```bash
dato docker sudo
```

Ou, para um usuÃ¡rio especÃ­fico:

groups nome_do_usuario

ğŸ“Œ *Motivo*:

* Isso permite rodar `docker run`, `docker ps` etc. sem `sudo`.
* Mas âš ï¸ **atenÃ§Ã£o**: a doc tambÃ©m alerta que adicionar usuÃ¡rios ao grupo `docker` dÃ¡ **privilÃ©gios de root**, pois quem controla o Docker pode acessar todo o sistema.



---

âœ… Pronto, com isso seu **Ubuntu Server 24.04** terÃ¡ o **Docker Engine instalado via CLI** seguindo a **doc oficial**.

---
'
